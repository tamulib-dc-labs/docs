<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Identifiers" href="identifiers.html" /><link rel="prev" title="IIIF: Generating IIIF and IIIF Collections" href="generating_iiif_collections.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Generating Service Files and Derivatives - TAMU Digital Collections Labs documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">TAMU Digital Collections Labs  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">TAMU Digital Collections Labs  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Overview of Digital Library Program</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/01_current.html">Infrastructure, Software, and Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/02_people.html">People and Departments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/05_projects.html">Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Policies and Procedures</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../policies/captions_and_transcripts.html">Policy and Guiding Principles for Captioning and Transcription of A/V Works</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Applications and Workflows</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/avalon.html">Avalon</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Avalon</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/api-batch-upload.html">Importing media into Avalon via API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/avalon_importing_entities.html">Importing media into Avalon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/avalon_template.html">Template for Avalon Batch Imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/downloading_from_avalon.html">Downloading media from Avalon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/metadata.html">Avalon Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/pdf-creation.html">How to make a PDF transcript to upload to Avalon.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/avalon/remediating-failed-imports.html">Remediating Failed Imports in Avalon</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/dspace.html">DSPACE &amp; Oaktrust</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of DSPACE &amp; Oaktrust</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/dspace-entities.html">Understanding Our DSPACE Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/dspace_9_testing.html">Features and Tests for DSPACE 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/dspace_entities.html">DSPACE Entity Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/dspace_importing.html">DSPACE: Importing Basic Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/dspace_importing_entities.html">DSPACE: Importing Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/oaktrust.html">OAKTrust and DSPACE Statistcs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/dspace/rdfizing.html">RDFizing DSPACE Works to Generate Manifests</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/fedora.html">Fedora</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Fedora</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/fedora/creating-iiif-manifests.html">Creating IIIF Collections and Manifests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/fedora/fedora_solr.html">Understanding Solr Config in Fedora</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/fedora/post-ingestion.html">Reindexing Solr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/fedora/using-karaf.html">Using Karaf</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/ojs.html">OJS</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of OJS</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/ojs/applying_for_issns.html">Applying for an ISSN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/ojs/minting_dois_in_ojs.html">Minting DOIs in OJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/ojs/ojs_and_doi_metadata.html">OJS and DOI Metadata</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/open-oni.html">Open ONI</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Open ONI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/open-oni/open-oni-problems.html">Solving Open Oni Issues</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/sage.html">SAGE</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of SAGE</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/sage/sage-import.html">Importing media into SAGE - WITHOUT Rancher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/sage/sage_import.html">SAGE Import</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../workflows/spotlight_import.html">Spotlight</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Spotlight</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../applications/spotlight/creating-an-exhibit.html">Creating and Modifying Exhibits</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Services and Topics</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="accessibility.html">Accessibility</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Accessibility</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/accessibility/pdf_accessibility.html">PDF Accessibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="generating_iiif_collections.html">IIIF: Generating IIIF and IIIF Collections</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Generating Service Files and Derivatives</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="identifiers.html">Identifiers</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Identifiers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/identifiers/doi-naming.html">Conventions for Structuring DOIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/identifiers/minting_a_doi.html">Minting DOIs in Crossref</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/identifiers/minting_arks.html">Minting ARKs with EZID</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="kube.html">Kubernetes and Docker</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Kubernetes and Docker</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/kube-and-docker/kubectl.html">Configuring and Using Kubectl to Access PODs without a Browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/kube-and-docker/running_detached_processes_in_docker.html">Running Detached Processes in a Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_super_computer_for_gpu_needs.html">Using the Super Computer when we Need GPU</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="whisper.html">Whisper</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Whisper</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/whisper/whisper-transcripts.html">Making Transcripts with Whisper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/whisper/whisper-transcripts-cleanup.html">Cleaning a Whisper Transcript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics_and_services/whisper/whisperx-transcripts.html">Making Transcripts with WhisperX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configurations and Mappings</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../config/cantaloupe_config.html">Cantloupe Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Crosswalking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../crosswalking/avalon-to-pdf.html">Crosswalking: Avalon to PDF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crosswalking/creating-ark.html">Creating ARKs with TAMU ID Minter</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/other_services/generating_service_files.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="generating-service-files-and-derivatives">
<h1>Generating Service Files and Derivatives<a class="headerlink" href="#generating-service-files-and-derivatives" title="Link to this heading">¶</a></h1>
<p>The images we serve to users in our various repositories are all handled by an image server called Cantaloupe.
Cantaloupe takes a file from DSpace or Fedora and generates a tiled image and a thumbnail from the base asset stored in
the repository. These processes are resource intensive and can greatly affect the experience of our users. This process
is especially affected by the quality, size, and type of file. For that reason, we serve high quality lossy files from
our preservation files based on current best practices and research.</p>
<p>Note worthy documents used in this decision making include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.htj2k.com/wp-content/uploads/white-paper.pdf">High Throughput JPEG 2000 (HTJ2K): Algorithm, Performance and Potential</a></p></li>
<li><p><a class="reference external" href="https://bitsgalore.org/2022/03/30/generating-lossy-access-jp2s-from-lossless-preservation-masters.html">Generating lossy access JP2s from lossless preservation masters</a></p></li>
<li><p><a class="reference external" href="https://journal.code4lib.org/articles/17596">Evaluating HTJ2K as a Drop-In Replacement for JPEG2000 with IIIF</a></p></li>
<li><p><a class="reference external" href="https://www.hathitrust.org/member-libraries/resources-for-librarians/contributor-toolkit/technical-requirements-page-images/">Technical Requirements for Digitized Page Images Submitted to HathiTrust</a></p></li>
</ul>
<section id="preferences-for-service-files">
<h2>Preferences for Service Files<a class="headerlink" href="#preferences-for-service-files" title="Link to this heading">¶</a></h2>
<section id="htj2k">
<h3>HTJ2K<a class="headerlink" href="#htj2k" title="Link to this heading">¶</a></h3>
<p>While we don’t use this format yet since Cantaloupe 5.0.6 cannot process these, we acknowledge that this is the best
format for performance and service file use. We will closely watch developments with HTJ2K and Cantaloupe and adopt
accordingly when support is more widely available.</p>
</section>
<section id="lossy-jp2">
<h3>Lossy JP2<a class="headerlink" href="#lossy-jp2" title="Link to this heading">¶</a></h3>
<p>Much research has been done showing that lossy JP2 is best in quality, performance, and speed.  Thus we create lossy
JP2s with grok or kakadu for service files.</p>
</section>
<section id="jpg">
<h3>JPG<a class="headerlink" href="#jpg" title="Link to this heading">¶</a></h3>
<p>High quality JPGs are acceptable but less desirable than lossy JP2s.</p>
</section>
</section>
<section id="generating-lossy-jp2s">
<h2>Generating Lossy JP2s<a class="headerlink" href="#generating-lossy-jp2s" title="Link to this heading">¶</a></h2>
<p>Lossy JP2s can be generated from a directory of images using <a class="reference external" href="https://github.com/markpbaggett/quick_convert">an in-house written program</a>
like so:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>markcovert<span class="w"> </span>path<span class="w"> </span>-t<span class="w"> </span>jp2<span class="w"> </span>-p<span class="w"> </span>path/to/files<span class="w"> </span>-o<span class="w"> </span>/path/to/output/destination
</pre></div>
</div>
<p>This application wraps many command line utilities and is capable of creating a large number of qualities and formats.
When creating lossy JP2s, it effectively does this for each file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kdu_compress<span class="w"> </span>-i<span class="w"> </span>input.tiff<span class="w"> </span>-o<span class="w"> </span>output.jp2<span class="w"> </span><span class="nv">Creversible</span><span class="o">=</span><span class="s1">&#39;yes&#39;</span><span class="w"> </span><span class="nv">Qfactor</span><span class="o">=</span><span class="m">90</span><span class="w"> </span><span class="nv">ORGgen_plt</span><span class="o">=</span>yes<span class="w"> </span><span class="nv">Corder</span><span class="o">=</span>RPCL<span class="w"> </span><span class="nv">Cprecincts</span><span class="o">=</span><span class="s2">&quot;{256,256}&quot;</span><span class="w"> </span><span class="nv">Cblk</span><span class="o">=</span><span class="s2">&quot;{64,64}&quot;</span><span class="w"> </span><span class="nv">Clevels</span><span class="o">=</span><span class="m">8</span>
</pre></div>
</div>
</section>
<section id="files-for-hathitrust">
<h2>Files for HathiTrust<a class="headerlink" href="#files-for-hathitrust" title="Link to this heading">¶</a></h2>
<p>We do not send TIFFs to HathiTrust either.  Instead, we follow their requested practices and send JP2s according to
their standard.  Also, we use grok for this to align with their processes and we copy existing data from the
preservation files using exiftool and check the preservation files with jhove.  Using modern grok and python, that
equates to doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
<span class="n">tifs_path</span> <span class="o">=</span> <span class="s2">&quot;/Volumes/digital_project_management/Ranchers Roundup/1988/TIFF&quot;</span>
<span class="n">jp2s_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">tifs_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/TIFF&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">/JP2s&#39;</span>
<span class="n">jhove_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">tifs_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/TIFF&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">/JHOVE&#39;</span>
<span class="n">jp2s_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">jp2s_path</span><span class="p">)</span>
<span class="n">jhove_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">jhove_path</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">jp2s_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">jhove_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">tifs_path</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;grk_compress&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tifs_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jp2s_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jp2&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;RLCP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--sop&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--eph&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-M&quot;</span><span class="p">,</span> <span class="s2">&quot;62&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-I&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;32&quot;</span>
        <span class="p">]</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="n">exif_command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;exiftool&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-tagsfromfile&quot;</span><span class="p">,</span>
            <span class="s2">&quot;@&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-srcfile&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jp2s_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jp2&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tifs_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-XMP:format=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-ImageHistory=Technical metadata values were copied (via exiftool) from the original TIFF to this derivative JP2.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-EXIF:ColorSpace=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-overwrite_original&quot;</span>
        <span class="p">]</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">exif_command</span><span class="p">)</span>
        <span class="n">jhove_command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;jhove&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-h&quot;</span><span class="p">,</span>
            <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jp2s_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jp2&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jhove_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;xml&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">jhove_command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">output_file</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="generating-thumbnails-with-pillow">
<h2>Generating Thumbnails with Pillow<a class="headerlink" href="#generating-thumbnails-with-pillow" title="Link to this heading">¶</a></h2>
<p>If uploading a collection to DSPACE, you will often want thumbnails so that you don’t have to run an additional process.
Arguably, this should be added to the same utility above, but if you want another approach where you just get thumbnails
for certain files for a particular project, Pillow might be useful.</p>
<p>For instance, say we had a directory of PDFs that also had image files and we wanted to generate a thumbnail from the first
page of the PDF.  Something like this might be useful:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">csv</span><span class="w"> </span><span class="kn">import</span> <span class="n">DictWriter</span><span class="p">,</span> <span class="n">DictReader</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">year</span> <span class="o">=</span> <span class="s2">&quot;1988&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;charity_</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">pdf</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">pdf</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">zfilled</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">thumbnail_path</span> <span class="o">=</span>  <span class="sa">f</span><span class="s2">&quot;/Volumes/digital_project_management/Ranchers Roundup/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/thumbs/&quot;</span>
        <span class="n">jp2_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/Volumes/digital_project_management/Ranchers Roundup/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/JP2s/&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">thumbnail_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">jp2_path</span><span class="si">}{</span><span class="n">zfilled</span><span class="si">}</span><span class="s2">.jp2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">img</span><span class="p">:</span>
            <span class="n">img</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
            <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">thumbnail_path</span><span class="si">}{</span><span class="n">zfilled</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="identifiers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Identifiers</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="generating_iiif_collections.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">IIIF: Generating IIIF and IIIF Collections</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Mark Baggett
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Generating Service Files and Derivatives</a><ul>
<li><a class="reference internal" href="#preferences-for-service-files">Preferences for Service Files</a><ul>
<li><a class="reference internal" href="#htj2k">HTJ2K</a></li>
<li><a class="reference internal" href="#lossy-jp2">Lossy JP2</a></li>
<li><a class="reference internal" href="#jpg">JPG</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-lossy-jp2s">Generating Lossy JP2s</a></li>
<li><a class="reference internal" href="#files-for-hathitrust">Files for HathiTrust</a></li>
<li><a class="reference internal" href="#generating-thumbnails-with-pillow">Generating Thumbnails with Pillow</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>